os: osx
language: objective-c
osx_image: xcode11


jobs:
  include:
    - name: Darwin 
      env:
        - WORKSPACE='KisMac2.xcworkspace'
        - MACOS_SCHEME='KisMac2'
        - MACOS_DESTINATION='platform=OS X'
      before_install:
        - git submodule update --init --recursive
      script:
        - set -o pipefail
        - xcodebuild clean build test -workspace "$WORKSPACE" -scheme "$MACOS_SCHEME" -destination "$MACOS_DESTINATION" | XCPRETTY_JSON_FILE_OUTPUT="xcodebuild-macos.json" xcpretty -f `xcpretty-json-formatter`

branches:
  only:
    - master
